
使用 NFS (Network File System) 是嵌入式开发中最常用的文件传输和调试方式。但是建议用adb，用abd，用adb

虚拟机连接开发板后打开虚拟机终端
使用 adb push 命令。
基本语法：
adb push <虚拟机本地文件路径> <开发板目标路径>
示例：
假设你要把当前目录下的 app.apk 上传到开发板的 /sdcard/ 目录下：
adb push ./app.apk /sdcard/
提示：
如果提示“Read-only file system”（只读文件系统），建议先传到 /sdcard/ 或 /data/local/tmp/ 这类通常有写入权限的目录。



若坚持使用nfs：
前提条件：

网络互通：开发板和虚拟机必须在同一个网段，且能互相 ping 通。（注意：虚拟机通常需要设置为“桥接模式”，不能是 NAT 模式）。

内核支持：你的内核必须开启 NFS 客户端支持（Buildroot 默认通常是开启的）。

第一步：在虚拟机（Host）上搭建 NFS 服务器

安装 NFS 服务端

sudo apt update
sudo apt install nfs-kernel-server -y

创建共享目录
建议专门建立一个目录用于传输，不要直接共享整个 SDK 目录（太乱）。

mkdir -p /home/wzp/nfs_share
chmod 777 /home/wzp/nfs_share

配置导出文件
编辑配置文件：

sudo vi /etc/exports

在文件末尾添加一行（请将路径换成你实际创建的路径）：

/home/wzp/nfs_share *(rw,sync,no_root_squash,no_subtree_check)

*：允许任何 IP 访问（开发环境图方便）。

rw：允许读写。

no_root_squash：关键参数。允许开发板以 root 身份操作文件（否则开发板创建的文件在虚拟机里是锁住的）。

重启 NFS 服务

sudo exportfs -ra
sudo service nfs-kernel-server restart

查看虚拟机 IP

ip addr

假设查到的 IP 是 192.168.31.212。

第二步：在开发板（Target）上挂载

连接网线并获取 IP
确保开发板插上了网线，并且获取到了 IP。

# 串口终端中
ifconfig eth0 up
udhcpc -i eth0  # 如果没有自动获取 IP，手动获取一下
ifconfig        # 查看 IP

假设开发板 IP 是 192.168.1.101。

测试网络连通性
在开发板上 ping 虚拟机：

ping 192.168.31.212

如果 ping 不通，请检查虚拟机网络适配器是否选了“桥接模式”。

挂载 NFS
执行挂载命令（注意 -o nolock 是必须的，因为嵌入式系统通常没有完善的文件锁服务）：

# 语法: mount -t nfs -o nolock [虚拟机IP]:[共享目录路径] [开发板本地挂载点]
mount -t nfs -o nolock 192.168.31.212:/home/wzp/nfs_share /mnt

验证
ls /mnt

如果你在虚拟机的 /home/wzp/nfs_share 里放个文件，现在开发板的 /mnt 下应该能看到了。

常见问题排查

Q1: 挂载时卡住不动（Connection timed out）

原因：虚拟机的防火墙拦截了 NFS 端口。

解决：在虚拟机上暂时关闭防火墙：
sudo ufw disable

Q2: 报错 Permission denied

原因：/etc/exports 配置不对，或者没有加 no_root_squash。

解决：检查第一步的配置，修改后记得运行 sudo exportfs -ra。

Q3: 报错 No such device 或 Protocol not supported

原因：内核没开 NFS 客户端支持。

解决：你需要去 Kernel Menuconfig 检查：
File systems -> Network File Systems -> <*> NFS client support (确保选为 * 也就是 built-in，不要选 M)，并且勾选 NFS client support for NFS version 3 和 version 4。

Q4: 挂载成功，但无法运行程序 (Text file busy)

原因：你正在运行这个程序，无法覆盖。

解决：先杀掉开发板上正在运行的程序，再从虚拟机复制新文件过来。或者直接把程序拷贝到开发板的 /tmp 目录再运行：

cp /mnt/my_program /tmp/
chmod +x /tmp/my_program
/tmp/my_program